# ============================================
# Otium 后端环境变量配置
# ============================================
# 复制此文件为 .env 并填写实际值
# 部署到 Render 时，在 Dashboard 中设置这些变量
# ============================================

# ==================== 应用配置 ====================
# 环境：development, production, testing
ENVIRONMENT=development

# 调试模式（开发环境启用）
DEBUG=True

# 应用名称
APP_NAME=Otium

# 应用版本
APP_VERSION=1.0.0

# ==================== 服务器配置 ====================
# 主机和端口（Render 会自动设置 PORT 变量）
HOST=0.0.0.0
# PORT 由 Render 自动设置，不需要手动配置

# API 前缀
API_PREFIX=/api

# CORS 配置（用逗号分隔多个来源）
CORS_ORIGINS=http://localhost:3000,http://localhost:8000,https://your-netlify-app.netlify.app

# ==================== JWT 认证配置 ====================
# 安全密钥：生成随机字符串，如：openssl rand -hex 32
SECRET_KEY=your-secret-key-here-change-in-production

# JWT 算法
ALGORITHM=HS256

# 访问令牌过期时间（分钟）
ACCESS_TOKEN_EXPIRE_MINUTES=30

# 管理员令牌过期时间（分钟）
ADMIN_TOKEN_EXPIRE_MINUTES=1440  # 24小时

# ==================== API 密钥配置 ====================
# Gemini API Key（从 https://makersuite.google.com/app/apikey 获取）
GEMINI_API_KEY=your_gemini_api_key_here

# GPTZero API Key（从 https://gptzero.me/ 获取）
GPTZERO_API_KEY=your_gptzero_api_key_here

# ==================== 数据库配置 ====================
# 数据库类型：sqlite, postgresql
DATABASE_TYPE=sqlite

# SQLite 数据库路径（相对路径）
DATABASE_PATH=./data/otium.db

# PostgreSQL 配置（生产环境使用）
# DATABASE_URL=postgresql://user:password@localhost/otium

# 密码哈希算法（sha256, bcrypt）
PASSWORD_HASH_ALGORITHM=sha256

# ==================== 文件存储配置 ====================
# 数据目录（用户数据、日志等）
DATA_DIR=./data

# 备份目录
BACKUP_DIR=./backups

# ==================== 速率限制配置 ====================
# 普通用户每分钟请求限制
RATE_LIMIT_PER_MINUTE=60

# 管理员每分钟请求限制
ADMIN_RATE_LIMIT_PER_MINUTE=200

# 用户每日使用限制
DAILY_TRANSLATION_LIMIT=3
DAILY_AI_DETECTION_LIMIT=3

# ==================== 日志配置 ====================
# 日志级别：DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# 日志文件路径
LOG_FILE=./logs/otium.log

# 是否输出到控制台
LOG_TO_CONSOLE=True

# ==================== 安全配置 ====================
# 密码哈希算法
PASSWORD_HASH_ALGORITHM=bcrypt

# 密码哈希轮次
PASSWORD_HASH_ROUNDS=12

# 是否启用 HTTPS 重定向（生产环境启用）
ENABLE_HTTPS_REDIRECT=False

# ==================== 功能开关 ====================
# 是否启用 AI 检测功能
ENABLE_AI_DETECTION=True

# 是否启用文本润色功能
ENABLE_TEXT_REFINEMENT=True

# 是否启用翻译指令功能
ENABLE_TRANSLATION_DIRECTIVES=True

# ==================== 邮件服务配置 ====================
# 邮件服务提供商：resend 或 smtp
EMAIL_PROVIDER=resend

# Resend API配置（当EMAIL_PROVIDER=resend时使用）
# 注册Resend：https://resend.com/
# 获取API密钥：https://resend.com/api-keys
RESEND_API_KEY=your_resend_api_key_here
RESEND_FROM=onboarding@resend.dev  # 或您的已验证邮箱

# SMTP配置（当EMAIL_PROVIDER=smtp时使用）
# SendGrid邮件服务配置（必需）
# 发送邮件验证码和密码重置链接
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587  # 使用STARTTLS，或使用465端口和SMTP_SSL=true
SMTP_USERNAME=apikey  # SendGrid固定用户名
SMTP_PASSWORD=your-sendgrid-api-key  # SendGrid API密钥
SMTP_FROM=noreply@example.com  # 发件人邮箱（需要在SendGrid验证）
SMTP_TLS=true
# SMTP_SSL=false  # 如果使用465端口，设置为true
SMTP_TIMEOUT=30  # 邮件发送超时时间（秒）

# 验证码和令牌配置
VERIFICATION_CODE_TTL=600  # 10分钟（秒）
RESET_TOKEN_TTL=86400  # 24小时（秒）
MAX_VERIFICATION_ATTEMPTS=3
EMAIL_VERIFICATION_REQUIRED=true

# 前端URL配置（用于重置密码链接）
FRONTEND_BASE_URL=http://localhost:3000

# Resend配置说明：
# 1. 在Resend官网注册账户：https://resend.com/
# 2. 创建API密钥：登录后进入API Keys页面创建
# 3. 验证发件人邮箱或域名
# 4. 使用onboarding@resend.dev作为临时发件人邮箱
# 5. Resend免费套餐有每月100封邮件的限额

# SendGrid配置说明：
# 1. 在SendGrid控制台创建API密钥（需要邮件发送权限）
# 2. 验证发件人邮箱地址（单个发件人验证）或域名
# 3. 免费套餐通常有100封/天的发送限额
# 4. 确保防火墙允许连接到smtp.sendgrid.net

# ==================== Render 特定配置 ====================
# Render 会自动设置以下变量：
# - PORT: 应用程序监听的端口（自动设置）
# - RENDER: 设置为 "true" 表示在 Render 运行
# - RENDER_EXTERNAL_URL: 应用的外部 URL
#
# 在 Render 部署时，建议设置：
# ENVIRONMENT=production
# DEBUG=False
# ENABLE_HTTPS_REDIRECT=True

# ==================== 测试配置 ====================
# 测试模式（pytest 使用）
TESTING=False

# 测试数据库路径
TEST_DATABASE_PATH=./data/test.db

# ============================================
# 配置说明：
# 1. 本地开发：复制此文件为 .env，填写实际值
# 2. Render 部署：在 Render Dashboard -> Environment 中设置变量
# 3. 敏感信息（API 密钥、SECRET_KEY）不要提交到版本控制
# ============================================